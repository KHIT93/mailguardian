{% extends 'mailguardian/_layouts/master.html' %}
{% load i18n %}

{% block content %}
<table align="center" width="100%" cellpadding="0" cellspacing="0" class="text-center mb-4">
    <tr>
        <td>
            <h2 class="mb-2">{% trans "Quarantine Report" %}</h2>
        </td>
    </tr>
    <tr>
        {% if messages %}
        <td>
            {% trans "Please find below your Quarantine Report for the last" %} {{ period }} {% trans "day(s)" %}.<br/>{% trans "We have" %} {% if show_all %}{% trans "processed" %}{% else %}{% trans "quarantined" %}{% endif %} {{ message_count }} {% trans "messages and listed them below" %}. {% trans "All quarantined messages will be kept for" %} {{ retention_days }} {% trans "day(s)" %}
        </td>
        {% else %}
        <td>{% trans "During the last" %} {{ period }}, {% trans "we did not find any messages that needed to be quarantined" %}</td>
        {% endif %}
    </tr>
</table>
{% if messages %}
<table class="table" align="center" width="100%" cellpadding="0" cellspacing="0">
    <tr class="font-bold bg-grey">
        <td>{% trans "Recieved" %}</td>
        <td>{% trans "From" %}</td>
        <td>{% trans "To" %}</td>
        <td>{% trans "Subject" %}</td>
        <td>{% trans "Reason" %}</td>
        <td>{% trans "Actions" %}</td>
    </tr>
    {% for message in messages %}
    <tr>
        <td>{{ message.timestamp }}</td>
        <td>{{ message.from_address }}</td>
        <td>{{ message.to_address }}</td>
        <td>{{ message.subject}}</td>
        <td>
            {% if message.is_spam %}{% trans "Spam" %}{% endif %}
            {% if message.is_mcp %}{% trans "MCP" %}{% endif %}
            {% if message.infected %}{% trans "Infected" %}{% endif %}
            {% if message.is_rbl_listed %}{% trans "Listed in RBL" %}{% endif %}
            {% if message.blacklisted %}{% trans "Blacklisted" %}{% endif %}
        </td>
        <td>
            <a href="{{ protocol }}://{{ domain }}/messages/{{message.id}}">{% trans "View" %}</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endif %}
{% endblock %}